# 单调栈

## 基本介绍

给定一个 n 个数的数组和一个空栈，依次读取 n 个数，每个数分别入栈一次，出栈一次，最后仍然是空栈。

在这个过程中，需要保持栈里面的元素 **从栈顶到栈底一直是单调递增（或递减）** 的，相应的，按照出栈顺序排列的 n 个数也是单调递增（或递减）的。

n 个数的入栈顺序是原数组顺序，但是出栈顺序就不一定了，这个算法就是用来控制，何时入栈，何时出栈。

## 经典题目

### 题目一：双侧最近较小元素

给定一个数组，求数组中每个位置的 **左边最近的小于它的元素，和右边最近的小于它的元素**。

本题可分为两个子题：

- 数组中无重复元素
- 数组中有重复元素

例如：`arr=[3,4,2,6,1,7,0]`，第一个元素 `3` 左边最近的小于它的元素没有，右边最近的小于它的元素为 `2`。

> 本题就是在考察单调栈的实现。

### 题目二：子数组的最大指标

给定一个只包含正数的数组 arr，arr 中任何一个子数组 sub，一定都可以算出一个指标：`(sub累加和)*(sub中的最小值)` 是什么，那么所有子数组中，这个值最大是多少？

#### 解决方法

使用单调栈，对每一个位置讨论，求 **以数组中每一个位置为最小值** 的子数组的最大指标是多少，最后一起取最大值即可。而以数组中某一个位置为最小值的子数组的最大指标的范围可以使用单调栈，即左边最近比他小的元素，到右边最近比他小的元素这个范围限定。

### 题目三：直方图最大面积

> https://leetcode.cn/problems/largest-rectangle-in-histogram/

给定一个非负数组 arr，代表直方图，返回直方图最大长方形面积。

